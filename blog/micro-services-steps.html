<!DOCTYPE html><html lang="en-us" class="__variable_641c3b scroll-smooth"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/2d141e1a38819612-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" as="image" href="/static/images/avatar.jpg"/><link rel="preload" as="image" href="/static/images/monolithic.png"/><link rel="preload" as="image" href="/static/images/mongodb-atlas-infra.png"/><link rel="preload" as="image" href="/static/images/s3-athena-logging.png"/><link rel="preload" as="image" href="/static/images/datadog-monitoring.png"/><link rel="preload" as="image" href="/static/images/dynamodb.png"/><link rel="stylesheet" href="/_next/static/css/63d832ba73ce976a.css" crossorigin="" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/f1bf47635328e9e3.css" crossorigin="" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-1b75e9b8c94ba4c0.js" crossorigin=""/><script src="/_next/static/chunks/fd9d1056-45c1d1d33afce4a4.js" async="" crossorigin=""></script><script src="/_next/static/chunks/472-6badfa0af562919a.js" async="" crossorigin=""></script><script src="/_next/static/chunks/main-app-2f4d536b57f0a722.js" async="" crossorigin=""></script><script src="/_next/static/chunks/326-4c48d497d1f9fab1.js" async=""></script><script src="/_next/static/chunks/322-a07f3783407c4341.js" async=""></script><script src="/_next/static/chunks/app/layout-c4b3d423a9669b6c.js" async=""></script><script src="/_next/static/chunks/app/blog/%5B...slug%5D/page-0a76953c9f645f94.js" async=""></script><link rel="preload" href="https://analytics.umami.is/script.js" as="script"/><title>바닥부터 다시 쌓은 서비스 - MSA 아키텍처 도입기 | Gonewbie&#x27;s notepad</title><meta name="description" content="기존 아키텍처의 문제점과 이를 개선하기 위한 MSA 아키텍처 구축 방법에 대해 알아보자."/><meta name="robots" content="index, follow"/><meta name="googlebot" content="index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1"/><link rel="canonical" href="https://gonewbie.github.io/blog/micro-services-steps"/><link rel="alternate" type="application/rss+xml" href="https://gonewbie.github.io/feed.xml"/><meta property="og:title" content="바닥부터 다시 쌓은 서비스 - MSA 아키텍처 도입기"/><meta property="og:description" content="기존 아키텍처의 문제점과 이를 개선하기 위한 MSA 아키텍처 구축 방법에 대해 알아보자."/><meta property="og:url" content="https://gonewbie.github.io/blog/micro-services-steps"/><meta property="og:site_name" content="Gonewbie&#x27;s notepad"/><meta property="og:locale" content="en_US"/><meta property="og:image" content="https://gonewbie.github.io/static/images/twitter-card.png"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2023-12-31T00:00:00.000Z"/><meta property="article:modified_time" content="2023-12-31T00:00:00.000Z"/><meta property="article:author" content="Hoehyeon Jung"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="바닥부터 다시 쌓은 서비스 - MSA 아키텍처 도입기"/><meta name="twitter:description" content="기존 아키텍처의 문제점과 이를 개선하기 위한 MSA 아키텍처 구축 방법에 대해 알아보자."/><meta name="twitter:image" content="https://gonewbie.github.io/static/images/twitter-card.png"/><meta name="next-size-adjust"/><link rel="apple-touch-icon" sizes="76x76" href="/static/favicons/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/favicons/favicon-16x16.png"/><link rel="manifest" href="/static/favicons/site.webmanifest"/><link rel="mask-icon" href="/static/favicons/safari-pinned-tab.svg" color="#5bbad5"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><script src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js" crossorigin="" noModule=""></script></head><body class="bg-white text-black antialiased dark:bg-gray-950 dark:text-white"><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><section class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="flex h-screen flex-col justify-between font-sans"><header class="flex items-center justify-between py-10"><div><a aria-label="Notepad" href="/"><div class="flex items-center justify-between"><div class="mr-3"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="53.87" height="43.61" viewBox="344.564 330.278 111.737 91.218"><defs><linearGradient id="logo_svg__b" x1="420.97" x2="420.97" y1="331.28" y2="418.5" gradientUnits="userSpaceOnUse"><stop offset="0%" style="stop-color:#06b6d4;stop-opacity:1"></stop><stop offset="100%" style="stop-color:#67e8f9;stop-opacity:1"></stop></linearGradient><linearGradient id="logo_svg__d" x1="377.89" x2="377.89" y1="331.28" y2="418.5" gradientUnits="userSpaceOnUse"><stop offset="0%" style="stop-color:#06b6d4;stop-opacity:1"></stop><stop offset="100%" style="stop-color:#67e8f9;stop-opacity:1"></stop></linearGradient><path id="logo_svg__a" d="M453.3 331.28v28.57l-64.66 58.65v-30.08l64.66-57.14Z"></path><path id="logo_svg__c" d="M410.23 331.28v28.57l-64.67 58.65v-30.08l64.67-57.14Z"></path></defs><use xlink:href="#logo_svg__a" fill="url(#logo_svg__b)"></use><use xlink:href="#logo_svg__c" fill="url(#logo_svg__d)"></use></svg></div><div class="hidden h-6 text-2xl font-semibold sm:block">Notepad</div></div></a></div><div class="flex items-center space-x-4 leading-5 sm:space-x-6"><a class="hidden font-medium text-gray-900 dark:text-gray-100 sm:block" href="/blog">Blog</a><a class="hidden font-medium text-gray-900 dark:text-gray-100 sm:block" href="/tags">Tags</a><a class="hidden font-medium text-gray-900 dark:text-gray-100 sm:block" href="/projects">Projects</a><a class="hidden font-medium text-gray-900 dark:text-gray-100 sm:block" href="/about">About</a><button aria-label="Search"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-6 w-6 text-gray-900 dark:text-gray-100"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg></button><button aria-label="Toggle Menu" class="sm:hidden"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="h-8 w-8 text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><div class="fixed left-0 top-0 z-10 h-full w-full transform bg-white opacity-95 duration-300 ease-in-out dark:bg-gray-950 dark:opacity-[0.98] translate-x-full"><div class="flex justify-end"><button class="mr-8 mt-11 h-8 w-8" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><nav class="fixed mt-8 h-full"><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/">Home</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/blog">Blog</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/tags">Tags</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/projects">Projects</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/about">About</a></div></nav></div></div></header><main class="mb-auto"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","headline":"바닥부터 다시 쌓은 서비스 - MSA 아키텍처 도입기","datePublished":"2023-12-31T00:00:00.000Z","dateModified":"2023-12-31T00:00:00.000Z","description":"기존 아키텍처의 문제점과 이를 개선하기 위한 MSA 아키텍처 구축 방법에 대해 알아보자.","image":"/static/images/twitter-card.png","url":"https://gonewbie.github.io/blog/micro-services-steps","author":[{"@type":"Person","name":"Hoehyeon Jung"}]}</script><section class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="fixed bottom-8 right-8 hidden flex-col gap-3 md:hidden"><button aria-label="Scroll To Comment" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"></path></svg></button><button aria-label="Scroll To Top" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button></div><article><div class="xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700"><header class="pt-6 xl:pb-6"><div class="space-y-1 text-center"><dl class="space-y-10"><div><dt class="sr-only">Published on</dt><dd class="text-base font-medium leading-6 text-gray-500 dark:text-gray-400"><time dateTime="2023-12-31T00:00:00.000Z">Sunday, December 31, 2023</time></dd></div></dl><div><h1 class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">바닥부터 다시 쌓은 서비스 - MSA 아키텍처 도입기</h1></div></div></header><div class="grid-rows-[auto_1fr] divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0"><dl class="pb-10 pt-6 xl:border-b xl:border-gray-200 xl:pt-11 xl:dark:border-gray-700"><dt class="sr-only">Authors</dt><dd><ul class="flex flex-wrap justify-center gap-4 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8"><li class="flex items-center space-x-2"><img src="/static/images/avatar.jpg" width="38" height="38" alt="avatar" class="h-10 w-10 rounded-full"/><dl class="whitespace-nowrap text-sm font-medium leading-5"><dt class="sr-only">Name</dt><dd class="text-gray-900 dark:text-gray-100">Hoehyeon Jung</dd><dt class="sr-only">Twitter</dt><dd></dd></dl></li></ul></dd></dl><div class="divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0"><div class="prose max-w-none pb-8 pt-10 dark:prose-invert"><h1 id="intro"><a href="#intro" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Intro</h1><p>MSA(Microservice Architecture)는 기존의 모놀리식 아키텍처에서 발생하는 문제점을 해결하기 위해 등장한 아키텍처입니다. 이런 MSA의 도입 배경과 도입 과정에서 발생한 문제점과 이를 해결하기 위한 방법에 대해 알아보겠습니다.</p><h1 id="기존-아키텍처의-문제점"><a href="#기존-아키텍처의-문제점" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>기존 아키텍처의 문제점</h1><div><img alt="Monolithic" src="/static/images/monolithic.png" width="1492" height="1440"/></div><p>기존의 모놀리식 아키텍처는 하나의 서비스에 모든 기능이 포함되어 있습니다. 따라서 트래픽이 증가하게 되면 DB 부하가 증가하고 해당 DB를 사용하는 전체 서비스들의 응답 속도가 느려지는 문제점이 있었습니다.</p><h1 id="msa-아키텍처의-도입-배경"><a href="#msa-아키텍처의-도입-배경" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>MSA 아키텍처의 도입 배경</h1><p>트래픽이 높을 것으로 예상되는 AA급 게임 서비스와 플랫폼이 연동되어야 했습니다. 이를 해결하기 위해 단순하게 인스턴스나 DB의 사양을 늘리기보다 기존의 모놀리식 아키텍처에서 서비스를 분리하여 서비스 간의 통신을 위한 API를 개발하였습니다.</p><h1 id="msa-아키텍처-구축하기"><a href="#msa-아키텍처-구축하기" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>MSA 아키텍처 구축하기</h1><p>이제 실제적으로 MSA 아키텍처를 도입하기 위해 기본 전제를 설정하겠습니다. 기존에도 AWS를 사용하고 있었기 때문에 이를 기반으로 MSA 아키텍처를 구축하겠습니다. 또한 별도의 인프라 구축 인원이 없기 때문에 AWS Managed Service를 사용하게 되었습니다.</p><h2 id="1-aws-lambda-구성-api"><a href="#1-aws-lambda-구성-api" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>1. AWS Lambda 구성 (API)</h2><p>기존에 EC2에서 동작하던 API 서버를 AWS Lambda로 변경하였습니다. AWS Lambda는 서버리스 아키텍처로써 서버를 관리할 필요가 없기 때문에 트래픽 증감에 따른 인프라 관리 부담이 없는 팀에서 활용하기 최적이란 결론에 이르러 활용하게 되었습니다. 또한 AWS Lambda 함수들의 배포를 용이하게 하기 위해 Serverless Framework를 사용하였습니다.</p><p>Serverless Framework를 통해 모든 AWS Lambda 함수들은 API Gateway를 통해 외부로 노출되게 됩니다. API Gateway는 AWS Lambda 함수들의 엔드포인트를 관리하고 트래픽을 분산시켜주는 역할을 합니다. AWS Lambda에서 직접 엔드포인트를 관리할 수도 있지만, API Gateway를 사용하면 트래픽 제한과 같은 기능을 사용할 수 있기 때문에 API Gateway를 사용하게 되었습니다. Token Bucket 알고리즘을 사용하여 트래픽을 제한하고, 트래픽이 허용량을 초과할 경우 429 Too Many Requests 에러를 반환하게 됩니다.</p><p>리전 당 동시성 할당량에 따라 1000~30000 동시성을 가질 수 있고 단일 리전에서 서비스가 구성되어 있었기 때문에 이를 기준으로 계산하려 합니다. 요청 당 실행 함수 횟수를 설명하기 위해 Public API는 다음과 같은 구조로 되어 있습니다.</p><div class="relative"><pre><code class="language-js code-highlight"><span class="code-line"><span class="token maybe-class-name">Public</span> <span class="token constant">API</span><span class="token punctuation">(</span><span class="token constant">AWS</span> <span class="token maybe-class-name">Lambda</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span><span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token maybe-class-name">Internal</span> <span class="token constant">API</span><span class="token punctuation">(</span><span class="token constant">AWS</span> <span class="token maybe-class-name">Lambda</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span><span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token function"><span class="token maybe-class-name">NoSQL</span></span><span class="token punctuation">(</span><span class="token maybe-class-name">MongoDB</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token maybe-class-name">Middleware</span> <span class="token constant">API</span><span class="token punctuation">(</span><span class="token constant">AWS</span> <span class="token maybe-class-name">Lambda</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span><span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token maybe-class-name">Internal</span> <span class="token constant">API</span><span class="token punctuation">(</span><span class="token constant">AWS</span> <span class="token maybe-class-name">Lambda</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span><span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token function"><span class="token maybe-class-name">NoSQL</span></span><span class="token punctuation">(</span><span class="token maybe-class-name">MongoDB</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span><span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token maybe-class-name">External</span> <span class="token function"><span class="token maybe-class-name">Service</span></span><span class="token punctuation">(</span><span class="token maybe-class-name">Blockchain</span><span class="token punctuation">,</span> <span class="token maybe-class-name">Game</span><span class="token punctuation">,</span> <span class="token maybe-class-name">Payment</span><span class="token punctuation">,</span> etc<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
</span></code></pre></div><p>Public API 요청의 응답 시간이 평균적으로 <code>250ms</code>라고 가정합시다. 서버가 싱가포르에 위치하고 있었기 때문에 이를 기준으로 계산하였습니다. 이 중에 <code>ap-southeast-1(싱가포르)</code> 리전의 경우 AWS의 latency를 측정할 경우 평균 <code>90ms</code>정도가 측정되었습니다. 따라서 <code>250ms</code>의 응답 시간 중 <code>90ms</code>는 latency로써 latency를 제외한 <code>160ms</code>를 함수 실행 시간으로 계산하였습니다. 기업 사용자들만 이용 가능한 Middleware API의 경우 외부 서비스를 호출하는 API가 존재하고 해당 서비스가 국내에 있는 경우가 많아 평균적으로 2배인 <code>500ms</code>의 응답 시간이 소요되었습니다.</p><p>참고. <a target="_blank" rel="noopener noreferrer" href="https://cloudping.info/">클라우드 서비스 ping 측정 사이트</a></p><p>또한 Lambda와 연동된 API Gateway의 경우 REST API 설정의 경우 1초당 <code>5000</code>개의 요청을 처리할 수 있으며 bust 요청 시 <code>10000</code>개의 요청을 처리할 수 있습니다.</p><p>RPS 계산식은 다음과 같습니다.</p><div class="relative"><pre><code class="language-js code-highlight"><span class="code-line"><span class="token constant">RPS</span> <span class="token operator">=</span> <span class="token constant">DAU</span> <span class="token operator">*</span> <span class="token maybe-class-name">Daily</span> <span class="token maybe-class-name">Personal</span> <span class="token maybe-class-name">Average</span> <span class="token maybe-class-name">Request</span> <span class="token operator">/</span> <span class="token number">86400</span>
</span></code></pre></div><p>DAU는 일일 사용자 수를 의미하며, Daily Personal Average Request는 일일 사용자 당 평균 요청 횟수를 의미합니다. DAU는 1만명으로 가정하고 Daily Personal Average Request는 20회로 가정하였습니다. 이를 통해 RPS는 다음과 같이 계산됩니다.</p><div class="relative"><pre><code class="language-js code-highlight"><span class="code-line"><span class="token constant">RPS</span> <span class="token operator">=</span> <span class="token number">10000</span> <span class="token operator">*</span> <span class="token number">20</span> <span class="token operator">/</span> <span class="token number">86400</span> <span class="token operator">=</span> <span class="token number">2.3148</span> <span class="token constant">RPS</span>
</span></code></pre></div><p>이는 API Gateway의 기본 제한인 5000 RPS보다 낮기 때문에 API Gateway 요청으로 전부 처리할 수 있게 됩니다.</p><p>참고. <a target="_blank" rel="noopener noreferrer" href="https://docs.aws.amazon.com/ko_kr/apigateway/latest/developerguide/limits.html#apigateway-account-level-limits-table">API Gateway 할당량</a></p><div class="relative"><pre><code class="language-js code-highlight"><span class="code-line">동시성 <span class="token operator">=</span> <span class="token punctuation">(</span>초당 요청 횟수<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>요청 수행 기간<span class="token punctuation">)</span>
</span></code></pre></div><p>Lambda의 동시성은 위의 공식을 통해 계산할 수 있습니다. 만일 서비스가 기하급수적으로 확장되서 1초에 100개의 요청을 처리하게 되었다면 다음과 같이 계산할 수 있습니다.</p><div class="relative"><pre><code class="language-js code-highlight"><span class="code-line">동시성 <span class="token operator">=</span> <span class="token number">100</span> requests<span class="token operator">/</span>second <span class="token operator">*</span> <span class="token number">0.160</span> second <span class="token operator">=</span> <span class="token number">16</span> concurrent requests
</span></code></pre></div><p>즉 하나의 API(Lambda 함수)가 16개의 요청을 동시성을 소모하게 됩니다. 마이크로서비스로 수행되는 만큼, 수십개의 Lambda가 동시에 호출되는 경우가 발생할 수 있게 됩니다. 기본적으로는 AWS Lambda는 리전 당 1000개의 함수를 동시에 실행할 수 있습니다. 하지만 마이크로서비스인 만큼, SQS나 기타 서비스에도 AWS Lambda가 활용되면서 동시성 할당량이 부족할 수 있게 됩니다. 따라서 이 부분을 AWS Solution Architect 팀과 협의하여 목표 활성 인원에 맞춰 필요한만큼 동시성을 사전에 증가시켰습니다.</p><h2 id="2-aws-cloudformation-구성-cicd"><a href="#2-aws-cloudformation-구성-cicd" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>2. AWS CloudFormation 구성 (CI/CD)</h2><p>기존에는 AWS CodeDeploy를 사용하여 배포를 진행하였습니다. 하지만 AWS CodeDeploy는 코드를 배포하기엔 좋았지만 이외의 인프라 구성에 관련된 부분은 직접 설정해야 하는 단점이 있었습니다. 인프라까지 통합적으로 관리하면서 AWS Lambda 함수들의 버전 관리를 위해서 AWS CloudFormation을 활용하게 되었습니다.</p><p>Github Actions와의 연동을 통해서 코드 배포와 동시에 빌드가 진행되고 AWS에 배포되는 CI/CD를 구축하였습니다. 배포용 AWS IAM을 생성하고 Github Secrets에 등록하여 Github Actions에서 사용하도록 하였습니다. 또한, 추가적으로 Slack 알림을 위한 Incoming Webhook을 생성하여 Slack에 배포 알림을 받을 수 있도록 하였습니다.</p><h2 id="3-mongodb-atlas-구성-nosql"><a href="#3-mongodb-atlas-구성-nosql" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>3. MongoDB Atlas 구성 (NoSQL)</h2><div><img alt="MongoDB Atlas Infra" src="/static/images/mongodb-atlas-infra.png" width="1546" height="1368"/></div><p>MongoDB Atlas는 MongoDB의 클라우드 기반 Managed Service로써 MongoDB를 사용하기 위한 인프라 구축에 관련된 부분을 모두 관리해주기 때문에 MongoDB Atlas를 사용하게 되었습니다. 다만 인프라 구성이 기존의 AWS VPC와 연동되지 않기 때문에 VPC Peering을 통해 연동하였습니다. 여기에 MongoDB Atlas에서는 Change Stream을 Trigger라는 이름으로 제공하고 있습니다. 이러한 Trigger에서는 MongoDB의 데이터 변화를 감지하여 이를 AWS로 보낼 수 있었는데 저희 팀에서는 이 이벤트를 EventBridge로 보내도록 처리했습니다. EventBridge는 AWS의 이벤트 버스로써 이벤트를 받아 이를 Lambda로 전달할 수 있습니다. 이를 통해 MongoDB의 데이터 변화를 실시간으로 감지하여 이를 Lambda로 전달하고 이를 기반으로 데이터들을 갱신할 수 있게 되었습니다.</p><h2 id="4-aws-sqs-구성-message-queue"><a href="#4-aws-sqs-구성-message-queue" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>4. AWS SQS 구성 (Message Queue)</h2><p>기존에는 서비스 간 요청을 직접 호출하는 방식으로 진행하였습니다. 하지만 서비스 간의 직접 호출은 서비스 간의 결합도를 높이게 되고, 특정 서비스의 장애가 다른 서비스로 확산될 수 있는 결과를 가지게 됩니다. 또한 Lambda의 경우, 동시성 할당량이 제한되어 있기 때문에 데이터 연동 작업에 있어서 트래픽이 급증할 경우 Lambda의 동시성 할당량을 초과할 경우 해당 데이터들이 소실될 우려가 있었습니다. 이를 해결하기 위해 서비스 간의 통신을 Message Queue를 통해 진행하게 되었습니다. AWS에서 지원하는 Message Queue는 여러 개가 있었지만, 팀의 규모와 해당 기능의 목적성을 생각해서 크게 2가지로 선택지를 압축하였습니다.</p><p>우선 AWS MSK는 Kafka를 AWS에서 제공하는 Managed Service로써 Kafka를 사용하기 위한 인프라 구축에 관련된 부분을 모두 관리해줍니다. 다만 MSK의 경우, AWS 인프라와 연결하기 위한 작업을 수동으로 작업해야 되는 단점이 있으며 Kafka를 관리해야 하는 등의 단점이 있었습니다.</p><p>두 번째로, AWS SQS는 AWS에서 제공하는 Message Queue로써 이벤트 처리에 대한 인프라 전반에 관련된 부분을 모두 관리해줍니다. 또한, AWS Lambda와의 연동이 용이하고, Lambda의 동시성 할당량을 초과할 경우에도 데이터가 소실되지 않고 SQS에 대기하게 됩니다.</p><h2 id="5-aws-opensearch-구성-search-engine"><a href="#5-aws-opensearch-구성-search-engine" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>5. AWS OpenSearch 구성 (Search Engine)</h2><p>기존에는 아이템 검색 기능이 별도로 존재하진 않았습니다. 하지만, 유저가 증가하고 유저들이 원하는 아이템을 손쉽게 찾기 위한 사용자 경험을 제공하기 위해 아이템 검색 기능을 추가하게 되었습니다.</p><p>이를 구현하기 위해 기존에는 MongoDB의 인덱스를 사용하여 검색 기능을 구현하고자 하였습니다. 하지만 MongoDB의 인덱스는 텍스트 검색에 최적화되어 있지 않았으며 NoSQL 특성 상 스키마가 존재하지 않는데 인덱스를 작성하게 되면 관리에 어려움이 생길 수 있기 때문에 해당 방법은 제외하였습니다.</p><p>차선책으로, AWS OpenSearch Service를 사용하고자 하였습니다. AWS OpenSearch Service는 Elasticsearch를 AWS에서 제공하는 Managed Service로써 Elasticsearch를 사용하기 위한 인프라 구축에 관련된 부분을 모두 관리해줍니다. 또한, Elasticsearch의 경우, 텍스트 검색에 최적화되어 있기 때문에 MongoDB의 인덱스를 사용하는 것에 비해 더 풍부한 기능을 활용할 수 있었습니다.</p><h2 id="6-aws-s3--athena-구성-logging"><a href="#6-aws-s3--athena-구성-logging" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>6. AWS S3 + Athena 구성 (Logging)</h2><div><img alt="S3, Athena Logging" src="/static/images/s3-athena-logging.png" width="1286" height="1234"/></div><p>이를 구현하기 위해 기존에는 MongoDB의 로그를 사용하고자 하였습니다. 하지만, MongoDB의 로그는 텍스트 형식으로 저장되어 있기 때문에 로그를 분석하기 위해서는 별도의 로그 분석 툴이 필요하고, 로그를 분석하기 위한 쿼리를 작성해야 하는 등의 단점이 있었습니다.</p><p>다른 방법을 모색한 결과, AWS S3와 Athena를 사용하고자 하였습니다. AWS S3는 AWS에서 제공하는 Object Storage로써 로그를 저장하기 위한 파일들을 AWS에서 관리할 수 있습니다. 또한, AWS S3에 저장된 로그를 Athena를 통해 쿼리를 작성하여 로그를 분석할 수 있습니다.</p><p>이러한 로깅 시스템을 구축하기 위해 AWS Kinesis를 도입했습니다. AWS Kinesis는 AWS에서 제공하는 Streaming Data Service로써 로그를 수집하기 위한 데이터 파이프라인 인프라에 대한 관리형 서비스를 제공합니다. Kinesis를 통해 축적된 로그 데이터는 Firehose를 통해 S3에 저장되고, 이를 Athena를 통해 쿼리를 작성하여 로그를 분석할 수 있게 됩니다. 또한, Athena 쿼리 분석 속도 향상을 위해 AWS Lambda를 활용하여 파티셔닝을 진행하였습니다.</p><h2 id="7-datadog-구성-monitoring"><a href="#7-datadog-구성-monitoring" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>7. Datadog 구성 (Monitoring)</h2><div><img alt="Datadog Logging" src="/static/images/datadog-monitoring.png" width="1146" height="1354"/></div><p>이를 해결하기 위해 기존에는 AWS CloudWatch를 사용하고자 하였습니다. 하지만, CloudWatch가 제공하는 기능들 만으로는 에러 로그를 수집하고, 이를 통해 서비스의 상태를 파악하기에는 한계가 있었습니다. 이에 다른 팀에서 활용 중인 Datadog를 도입하여 서비스 모니터링을 구성하였습니다.</p><p>AWS 계정 연결을 통해 인프라에서 사용중인 전반적인 리소스들의 상태를 모니터링할 수 있었고, 서비스에서 발생하는 에러 로그를 수집할 수 있게 되었습니다.</p><h1 id="msa-구성상-발생한-문제점"><a href="#msa-구성상-발생한-문제점" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>MSA 구성상 발생한 문제점</h1><h2 id="1-인프라-구성의-복잡성"><a href="#1-인프라-구성의-복잡성" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>1. 인프라 구성의 복잡성</h2><p>기존에는 AWS 상의 인프라가 비교적 간단하기 때문에 수동으로 관리하는 것이 가능했습니다. 하지만 MSA로 변경되면서 인프라가 복잡해지고 이를 관리하기 위해서 AWS CloudFormation과 같은 IaC 도구를 사용하게 되었습니다. 이를 통해 대부분의 AWS 기능들은 CloudFormation을 통해 관리하게 되었지만, MongoDB Atlas와 같은 AWS가 아닌 외부 서비스들은 CloudFormation을 통해 관리할 수 없었습니다.</p><p>따라서 MongoDB와 같은 외부 서비스들은 기존에는 수동으로 관리하였습니다. 하지만 stage에 따른 인프라 구성 변경을 수동으로 관리하기에는 개발자들이 휴먼 에러를 일으키기 쉬운 환경이었기에 다른 방법을 찾고자 하였습니다.</p><p>MongoDB Atlas에서는 이러한 MongoDB 인프라 구성을 관리하기 위한 CLI 도구로써 Realm CLI를 제공하고 있었습니다. 이러한 Realm CLI를 통해 인프라 관리를 커맨드라인에서 진행할 수 있게 되었습니다. 하지만 이러한 관리 방식의 파편화는 인프라 관리에 있어서 부담을 가지게 되었습니다.</p><p>여기에 한번은 Trigger 서비스에서 장애가 발생한 적이 있어서 Change Data가 누락된 적이 있었는데, 인프라가 분리되어 있다보니 이러한 데이터 연동 누락의 확인이 늦어지게 되었습니다. 또한 해당 서비스의 복구까지 시간이 소요되었고 이 기간 동안 데이터 연동이 누락되었기 때문에 수동으로 연동을 수행한 경험이 있었습니다. 인프라가 분리되어 있기 때문에 이러한 관리 포인트의 누락은 향후 서비스에도 큰 문제가 될 수 있는 부분이었습니다.</p><h2 id="2-인프라-구성의-비용"><a href="#2-인프라-구성의-비용" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>2. 인프라 구성의 비용</h2><p>MongoDB Atlas에서는 MongoDB 인프라 구성을 위한 관리형 인스턴스를 제공하고 있었습니다. 이러한 인스턴스는 MongoDB Atlas에서 관리하기 때문에 MongoDB를 활용하기 위해서는 MongoDB Atlas의 인스턴스 비용을 추가로 지불해야 했습니다.</p><p>마이크로서비스 별로 데이터베이스가 분리되는 만큼 인스턴스 비용이 추가로 발생하게 되었습니다. 게다가 개발 진행 당시에는 Serverless 형식의 서비스가 Preview 형태로 제공되어 있어 비용적으로는 효율적 일지라도 안정성의 이슈가 있었습니다.</p><h2 id="결론-aws-dynamodb-도입"><a href="#결론-aws-dynamodb-도입" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>결론. AWS DynamoDB 도입</h2><div><img alt="DynamoDB" src="/static/images/dynamodb.png" width="1482" height="1220"/></div><p>AWS DynamoDB는 MongoDB Atlas와 달리 AWS에서 제공하는 서비스이기 때문에 AWS CloudFormation을 통해 관리할 수 있었습니다. 이를 통해 GSIs(Global Secondary Index)로 관리할 수 있었고, 이를 통해 데이터를 더욱 효율적으로 관리할 수 있었습니다. 다만, CloudFormation을 통해 GSI를 관리할 때 하나의 테이블에서 한번에 하나의 GSI만 수정/삭제가 가능했기 때문에 이부분을 주의하며 개발을 진행했습니다.</p><p>또한 기존에는 캐싱 서비스를 구축하지 않아 DB로의 부하가 직접적으로 노출되었으나 DynamoDB에서는 DAX라는 캐싱 서비스를 제공하고 있었습니다. 캐싱을 활용하여 DB로의 부하를 줄일 수 있었고, 이를 통해 트래픽 증가에 따른 인프라 관리 부담을 줄일 수 있었습니다.</p><h1 id="추가-고려-사항"><a href="#추가-고려-사항" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>추가 고려 사항</h1><h2 id="1-aws-lambda의-cold-start"><a href="#1-aws-lambda의-cold-start" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>1. AWS Lambda의 Cold Start</h2><p>AWS Lambda는 서버리스 아키텍처로써 서버를 관리할 필요가 없이 서비스를 수행할 수 있습니다. 다만 서버가 없기 때문에 서비스가 최초로 호출될 때 서버를 생성하는 과정이 필요합니다. 이를 Cold Start라고 하는데, 이 과정에서 시간이 소요되기 때문에 이를 최소화하기 위한 방법을 고려해야 합니다.</p><p>이를 위해 다양한 방법이 존재하는데, 가장 간단한 방법은 Lambda 함수를 미리 호출하는 것입니다. 일반적으로 Lambda 함수는 최초 호출 시 Cold Start가 발생하고 이후 15분 동안에는 Warm Start가 발생합니다.</p><p>이를 활용하여 Lambda 함수를 미리 호출하면 Cold Start가 발생하지 않고 Warm Start가 발생하게 됩니다. 하지만 이를 위해 별도의 서비스를 구축하는 것은 개발자들이 관리적인 측면에서 인프라를 위한 인프라 구축을 하기 때문에 배제하게 되었습니다.</p><p>두번째 방법으로, Provisioned Concurrency를 활용하는 방법이 있습니다. 이는 AWS에서 제공하는 방법으로 Lambda 함수를 미리 호출하는 것과 유사한 방식으로 동작합니다. 실제로 인스턴스들을 지정된 갯수만큼 인스턴스를 미리 생성하게 됨으로써 해당 동시성만큼의 Lambda 함수들은 Cold Start가 발생하지 않게 됩니다. 하지만, 이는 인스턴스를 미리 생성하기 때문에 비용적인 측면에서는 비효율적이라는 단점이 있었으며, 해당 동시성 이상의 호출이 발생할 경우 마찬가지로 Cold Start가 발생하기 때문에 현재 리전의 최대 동시성과 동접 인원에 맞춘 동시성 제공을 통한 비용 효율화가 수행되어야 합니다.</p><h2 id="2-rds-구성-relational-database"><a href="#2-rds-구성-relational-database" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>2. RDS 구성 (Relational Database)</h2><p>기존에는 주요 서비스들이 서비스 외부에서 동작하기 때문에 NoSQL만 사용하고도 모든 기능을 수행할 수 있었습니다. 하지만 플랫폼에 다양한 기능이 추가되면서 NoSQL만으로는 데이터 정합성 체크가 어렵게 되었습니다.</p><p>AWS DynamoDB의 경우 Eventually Consistency를 제공하기 때문에 데이터 정합성 체크가 어려웠습니다. 데이터 갱신이 리전에 전파됨에 있어서 250ms 가량의 딜레이가 있으며 Primary Key나 LSIs(Local Secondary Index)를 통한 데이터 조회의 경우 이를 보장할 수 있지만, GSI의 경우 DynamoDB에서 Strong Consistency를 보장하지 않습니다.</p><blockquote><p>글로벌 보조 인덱스 또는 DynamoDB 스트림에서의 강력히 일관된 읽기는 지원되지 않습니다.</p></blockquote><p>참고. <a target="_blank" rel="noopener noreferrer" href="https://docs.aws.amazon.com/ko_kr/amazondynamodb/latest/developerguide/HowItWorks.ReadConsistency.html">DynamoDB 읽기 정합성</a></p><p>따라서 데이터 정합성 체크를 위해서는 DynamoDB Streams를 활용하여 데이터 변경 이벤트를 통한 갱신 처리를 수행하게 되었습니다. 하지만 이는 데이터 갱신 이벤트를 통해 데이터를 갱신하기 때문에 갱신 속도에 지연이 발생함에 따라 TPS가 낮아지게 됩니다. 또한, 이를 위해 별도의 인프라를 구축해야 하고 동시 데이터 갱신 시 실패 처리 등에 대한 로직을 추가로 작성해야 했습니다.</p><p>이러한 복잡성 때문에 데이터 정합성 체크를 위해 RDB를 사용하는 것이 근본적인 해결책임을 알게 되었으나 개발 일정 상 해당 이슈는 TPS를 희생하는 것으로 넘어가게 되었습니다.</p><h1 id="마무리"><a href="#마무리" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>마무리</h1><p>기존의 monolithic 구조에서 MSA로 점진적으로 변경하면서 구조 설명과 이를 위한 인프라 구성에 대해 알아보았습니다. 비록 전환 과정이 무조건적인 이득만 있는 부분이 아닌만큼 각 서비스의 특성과 개발 리소스에 따라 적절한 수준의 아키텍쳐를 구성하는 것이 중요한 점을 느낄 수 있었습니다.</p><blockquote><p>참고</p><p><a target="_blank" rel="noopener noreferrer" href="https://cloudping.info/">클라우드 서비스 별 Ping 확인</a></p><p><a target="_blank" rel="noopener noreferrer" href="https://docs.aws.amazon.com/ko_kr/apigateway/latest/developerguide/limits.html#apigateway-account-level-limits-table">API Gateway 할당량</a></p><p><a target="_blank" rel="noopener noreferrer" href="https://docs.aws.amazon.com/ko_kr/amazondynamodb/latest/developerguide/HowItWorks.ReadConsistency.html">DynamoDB 읽기 정합성</a></p></blockquote></div><div class="pb-6 pt-6 text-sm text-gray-700 dark:text-gray-300"><a target="_blank" rel="nofollow" href="https://mobile.twitter.com/search?q=https%3A%2F%2Fgonewbie.github.io%2Fblog%2Fmicro-services-steps">Discuss on Twitter</a> • <a target="_blank" rel="noopener noreferrer" href="https://github.com/gonewbie/gonewbie.github.io/blob/main/data/blog/micro-services-steps.mdx">View on GitHub</a></div><div class="pb-6 pt-6 text-center text-gray-700 dark:text-gray-300" id="comment"><button>Load Comments</button></div></div><footer><div class="divide-gray-200 text-sm font-medium leading-5 dark:divide-gray-700 xl:col-start-1 xl:row-start-2 xl:divide-y"><div class="py-4 xl:py-8"><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Tags</h2><div class="flex flex-wrap"><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/microservices">microservices</a><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/msa">msa</a><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/aws">aws</a><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/metaverseworld">metaverseworld</a></div></div><div class="flex justify-between py-4 xl:block xl:space-y-8 xl:py-8"><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Previous Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/http-tcp-and-tls">HTTP와 TCP/IP, HTTPS</a></div></div></div></div><div class="pt-4 xl:pt-8"><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" aria-label="Back to the blog" href="/blog">← Back to the blog</a></div></footer></div></div></article></section></main><footer><div class="mt-16 flex flex-col items-center"><div class="mb-3 flex space-x-4"><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="mailto:gounewbie@gmail.com"><span class="sr-only">mail</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="fill-current text-gray-700 hover:text-primary-500 dark:text-gray-200 dark:hover:text-primary-400 h-6 w-6"><path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"></path><path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://github.com/gonewbie"><span class="sr-only">github</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="fill-current text-gray-700 hover:text-primary-500 dark:text-gray-200 dark:hover:text-primary-400 h-6 w-6"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/hoe-hyeon-jung-895063140/"><span class="sr-only">linkedin</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="fill-current text-gray-700 hover:text-primary-500 dark:text-gray-200 dark:hover:text-primary-400 h-6 w-6"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 01-2.063-2.065 2.064 2.064 0 112.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg></a></div><div class="mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400"><div>Gonewbie</div><div> • </div><div>© 2024</div><div> • </div><a href="/">Gonewbie&#x27;s notepad</a></div><div class="mb-8 text-sm text-gray-500 dark:text-gray-400"><a target="_blank" rel="noopener noreferrer" href="https://github.com/timlrx/tailwind-nextjs-starter-blog">Tailwind Nextjs Theme</a></div></div></footer></div></section><script src="/_next/static/chunks/webpack-1b75e9b8c94ba4c0.js" crossorigin="" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/2d141e1a38819612-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/css/63d832ba73ce976a.css\",\"style\",{\"crossOrigin\":\"\"}]\n0:\"$L3\"\n"])</script><script>self.__next_f.push([1,"4:HL[\"/_next/static/css/f1bf47635328e9e3.css\",\"style\",{\"crossOrigin\":\"\"}]\n"])</script><script>self.__next_f.push([1,"5:I[3728,[],\"\"]\n7:I[9928,[],\"\"]\n8:I[7821,[\"326\",\"static/chunks/326-4c48d497d1f9fab1.js\",\"322\",\"static/chunks/322-a07f3783407c4341.js\",\"185\",\"static/chunks/app/layout-c4b3d423a9669b6c.js\"],\"ThemeProviders\"]\n9:I[3994,[\"326\",\"static/chunks/326-4c48d497d1f9fab1.js\",\"322\",\"static/chunks/322-a07f3783407c4341.js\",\"185\",\"static/chunks/app/layout-c4b3d423a9669b6c.js\"],\"\"]\na:I[8251,[\"326\",\"static/chunks/326-4c48d497d1f9fab1.js\",\"322\",\"static/chunks/322-a07f3783407c4341.js\",\"185\",\"static/chunks/app/layout-c4b3d423a966"])</script><script>self.__next_f.push([1,"9b6c.js\"],\"KBarSearchProvider\"]\nb:I[8326,[\"326\",\"static/chunks/326-4c48d497d1f9fab1.js\",\"797\",\"static/chunks/app/blog/%5B...slug%5D/page-0a76953c9f645f94.js\"],\"\"]\nc:I[7005,[\"326\",\"static/chunks/326-4c48d497d1f9fab1.js\",\"322\",\"static/chunks/322-a07f3783407c4341.js\",\"185\",\"static/chunks/app/layout-c4b3d423a9669b6c.js\"],\"KBarButton\"]\nd:I[5235,[\"326\",\"static/chunks/326-4c48d497d1f9fab1.js\",\"322\",\"static/chunks/322-a07f3783407c4341.js\",\"185\",\"static/chunks/app/layout-c4b3d423a9669b6c.js\"],\"\"]\ne:I[2298,[\"326\",\"st"])</script><script>self.__next_f.push([1,"atic/chunks/326-4c48d497d1f9fab1.js\",\"322\",\"static/chunks/322-a07f3783407c4341.js\",\"185\",\"static/chunks/app/layout-c4b3d423a9669b6c.js\"],\"\"]\nf:I[6954,[],\"\"]\n10:I[7264,[],\"\"]\n"])</script><script>self.__next_f.push([1,"3:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/63d832ba73ce976a.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]],[\"$\",\"$L5\",null,{\"buildId\":\"wFQPi2PH9jXLyNAhBtBbJ\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/blog/micro-services-steps\",\"initialTree\":[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"micro-services-steps\",\"c\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":[\\\"micro-services-steps\\\"]}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialHead\":[false,\"$L6\"],\"globalErrorComponent\":\"$7\",\"children\":[null,[\"$\",\"html\",null,{\"lang\":\"en-us\",\"className\":\"__variable_641c3b scroll-smooth\",\"suppressHydrationWarning\":true,\"children\":[[\"$\",\"link\",null,{\"rel\":\"apple-touch-icon\",\"sizes\":\"76x76\",\"href\":\"/static/favicons/apple-touch-icon.png\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"type\":\"image/png\",\"sizes\":\"32x32\",\"href\":\"/static/favicons/favicon-32x32.png\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"type\":\"image/png\",\"sizes\":\"16x16\",\"href\":\"/static/favicons/favicon-16x16.png\"}],[\"$\",\"link\",null,{\"rel\":\"manifest\",\"href\":\"/static/favicons/site.webmanifest\"}],[\"$\",\"link\",null,{\"rel\":\"mask-icon\",\"href\":\"/static/favicons/safari-pinned-tab.svg\",\"color\":\"#5bbad5\"}],[\"$\",\"meta\",null,{\"name\":\"msapplication-TileColor\",\"content\":\"#000000\"}],[\"$\",\"meta\",null,{\"name\":\"theme-color\",\"media\":\"(prefers-color-scheme: light)\",\"content\":\"#fff\"}],[\"$\",\"meta\",null,{\"name\":\"theme-color\",\"media\":\"(prefers-color-scheme: dark)\",\"content\":\"#000\"}],[\"$\",\"link\",null,{\"rel\":\"alternate\",\"type\":\"application/rss+xml\",\"href\":\"/feed.xml\"}],[\"$\",\"body\",null,{\"className\":\"bg-white text-black antialiased dark:bg-gray-950 dark:text-white\",\"children\":[\"$\",\"$L8\",null,{\"children\":[[\"$undefined\",\"$undefined\",\"$undefined\",[\"$\",\"$L9\",null,{\"async\":true,\"defer\":true,\"data-website-id\":\"$undefined\",\"src\":\"https://analytics.umami.is/script.js\"}],\"$undefined\"],[\"$\",\"section\",null,{\"className\":\"mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex h-screen flex-col justify-between font-sans\",\"children\":[[\"$\",\"$La\",null,{\"kbarConfig\":{\"searchDocumentsPath\":\"search.json\"},\"children\":[[\"$\",\"header\",null,{\"className\":\"flex items-center justify-between py-10\",\"children\":[[\"$\",\"div\",null,{\"children\":[\"$\",\"$Lb\",null,{\"href\":\"/\",\"aria-label\":\"Notepad\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center justify-between\",\"children\":[[\"$\",\"div\",null,{\"className\":\"mr-3\",\"children\":[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"xmlnsXlink\":\"http://www.w3.org/1999/xlink\",\"width\":53.87,\"height\":43.61,\"viewBox\":\"344.564 330.278 111.737 91.218\",\"children\":[[\"$\",\"defs\",null,{\"children\":[[\"$\",\"linearGradient\",null,{\"id\":\"logo_svg__b\",\"x1\":420.97,\"x2\":420.97,\"y1\":331.28,\"y2\":418.5,\"gradientUnits\":\"userSpaceOnUse\",\"children\":[[\"$\",\"stop\",null,{\"offset\":\"0%\",\"style\":{\"stopColor\":\"#06b6d4\",\"stopOpacity\":1}}],[\"$\",\"stop\",null,{\"offset\":\"100%\",\"style\":{\"stopColor\":\"#67e8f9\",\"stopOpacity\":1}}]]}],[\"$\",\"linearGradient\",null,{\"id\":\"logo_svg__d\",\"x1\":377.89,\"x2\":377.89,\"y1\":331.28,\"y2\":418.5,\"gradientUnits\":\"userSpaceOnUse\",\"children\":[[\"$\",\"stop\",null,{\"offset\":\"0%\",\"style\":{\"stopColor\":\"#06b6d4\",\"stopOpacity\":1}}],[\"$\",\"stop\",null,{\"offset\":\"100%\",\"style\":{\"stopColor\":\"#67e8f9\",\"stopOpacity\":1}}]]}],[\"$\",\"path\",null,{\"id\":\"logo_svg__a\",\"d\":\"M453.3 331.28v28.57l-64.66 58.65v-30.08l64.66-57.14Z\"}],[\"$\",\"path\",null,{\"id\":\"logo_svg__c\",\"d\":\"M410.23 331.28v28.57l-64.67 58.65v-30.08l64.67-57.14Z\"}]]}],[\"$\",\"use\",null,{\"xlinkHref\":\"#logo_svg__a\",\"fill\":\"url(#logo_svg__b)\"}],[\"$\",\"use\",null,{\"xlinkHref\":\"#logo_svg__c\",\"fill\":\"url(#logo_svg__d)\"}]]}]}],[\"$\",\"div\",null,{\"className\":\"hidden h-6 text-2xl font-semibold sm:block\",\"children\":\"Notepad\"}]]}]}]}],[\"$\",\"div\",null,{\"className\":\"flex items-center space-x-4 leading-5 sm:space-x-6\",\"children\":[[[\"$\",\"$Lb\",null,{\"href\":\"/blog\",\"className\":\"hidden font-medium text-gray-900 dark:text-gray-100 sm:block\",\"children\":\"Blog\"}],[\"$\",\"$Lb\",null,{\"href\":\"/tags\",\"className\":\"hidden font-medium text-gray-900 dark:text-gray-100 sm:block\",\"children\":\"Tags\"}],[\"$\",\"$Lb\",null,{\"href\":\"/projects\",\"className\":\"hidden font-medium text-gray-900 dark:text-gray-100 sm:block\",\"children\":\"Projects\"}],[\"$\",\"$Lb\",null,{\"href\":\"/about\",\"className\":\"hidden font-medium text-gray-900 dark:text-gray-100 sm:block\",\"children\":\"About\"}]],[\"$\",\"$Lc\",null,{\"aria-label\":\"Search\",\"children\":[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"fill\":\"none\",\"viewBox\":\"0 0 24 24\",\"strokeWidth\":1.5,\"stroke\":\"currentColor\",\"className\":\"h-6 w-6 text-gray-900 dark:text-gray-100\",\"children\":[\"$\",\"path\",null,{\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"d\":\"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z\"}]}]}],[\"$\",\"$Ld\",null,{}],[\"$\",\"$Le\",null,{}]]}]]}],[\"$\",\"main\",null,{\"className\":\"mb-auto\",\"children\":[\"$\",\"$Lf\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"template\":[\"$\",\"$L10\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":[\"$\",\"div\",null,{\"className\":\"flex flex-col items-start justify-start md:mt-24 md:flex-row md:items-center md:justify-center md:space-x-6\",\"children\":[[\"$\",\"div\",null,{\"className\":\"space-x-2 pb-8 pt-6 md:space-y-5\",\"children\":[\"$\",\"h1\",null,{\"className\":\"text-6xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 md:border-r-2 md:px-6 md:text-8xl md:leading-14\",\"children\":\"404\"}]}],[\"$\",\"div\",null,{\"className\":\"max-w-md\",\"children\":[[\"$\",\"p\",null,{\"className\":\"mb-4 text-xl font-bold leading-normal md:text-2xl\",\"children\":\"Sorry we couldn't find this page.\"}],[\"$\",\"p\",null,{\"className\":\"mb-8\",\"children\":\"But dont worry, you can find plenty of other things on our homepage.\"}],[\"$\",\"$Lb\",null,{\"href\":\"/\",\"className\":\"focus:shadow-outline-blue inline rounded-lg border border-transparent bg-blue-600 px-4 py-2 text-sm font-medium leading-5 text-white shadow transition-colors duration-150 hover:bg-blue-700 focus:outline-none dark:hover:bg-blue-500\",\"children\":\"Back to homepage\"}]]}]]}],\"notFoundStyles\":[],\"childProp\":{\"current\":[\"$\",\"$Lf\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"template\":[\"$\",\"$L10\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$\",\"$Lf\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\",[\"slug\",\"micro-services-steps\",\"c\"],\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"template\":[\"$\",\"$L10\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$L11\",\"$L12\",null],\"segment\":\"__PAGE__?{\\\"slug\\\":[\\\"micro-services-steps\\\"]}\"},\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/f1bf47635328e9e3.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]]}],\"segment\":[\"slug\",\"micro-services-steps\",\"c\"]},\"styles\":[]}],\"segment\":\"blog\"},\"styles\":[]}]}]]}],[\"$\",\"footer\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"mt-16 flex flex-col items-center\",\"children\":[[\"$\",\"div\",null,{\"className\":\"mb-3 flex space-x-4\",\"children\":[[\"$\",\"a\",null,{\"className\":\"text-sm text-gray-500 transition hover:text-gray-600\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"mailto:gounewbie@gmail.com\",\"children\":[[\"$\",\"span\",null,{\"className\":\"sr-only\",\"children\":\"mail\"}],[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 20 20\",\"className\":\"fill-current text-gray-700 hover:text-primary-500 dark:text-gray-200 dark:hover:text-primary-400 h-6 w-6\",\"children\":[[\"$\",\"path\",null,{\"d\":\"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z\"}],[\"$\",\"path\",null,{\"d\":\"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z\"}]]}]]}],[\"$\",\"a\",null,{\"className\":\"text-sm text-gray-500 transition hover:text-gray-600\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://github.com/gonewbie\",\"children\":[[\"$\",\"span\",null,{\"className\":\"sr-only\",\"children\":\"github\"}],[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 24 24\",\"className\":\"fill-current text-gray-700 hover:text-primary-500 dark:text-gray-200 dark:hover:text-primary-400 h-6 w-6\",\"children\":[\"$\",\"path\",null,{\"d\":\"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12\"}]}]]}],null,null,[\"$\",\"a\",null,{\"className\":\"text-sm text-gray-500 transition hover:text-gray-600\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://www.linkedin.com/in/hoe-hyeon-jung-895063140/\",\"children\":[[\"$\",\"span\",null,{\"className\":\"sr-only\",\"children\":\"linkedin\"}],[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 24 24\",\"className\":\"fill-current text-gray-700 hover:text-primary-500 dark:text-gray-200 dark:hover:text-primary-400 h-6 w-6\",\"children\":[\"$\",\"path\",null,{\"d\":\"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 01-2.063-2.065 2.064 2.064 0 112.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z\"}]}]]}],null]}],[\"$\",\"div\",null,{\"className\":\"mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400\",\"children\":[[\"$\",\"div\",null,{\"children\":\"Gonewbie\"}],[\"$\",\"div\",null,{\"children\":\" • \"}],[\"$\",\"div\",null,{\"children\":\"© 2024\"}],[\"$\",\"div\",null,{\"children\":\" • \"}],[\"$\",\"$Lb\",null,{\"href\":\"/\",\"children\":\"Gonewbie's notepad\"}]]}],[\"$\",\"div\",null,{\"className\":\"mb-8 text-sm text-gray-500 dark:text-gray-400\",\"children\":[\"$\",\"a\",null,{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://github.com/timlrx/tailwind-nextjs-starter-blog\",\"children\":\"Tailwind Nextjs Theme\"}]}]]}]}]]}]}]]}]}]]}],null]}]]\n"])</script><script>self.__next_f.push([1,"13:I[1514,[\"326\",\"static/chunks/326-4c48d497d1f9fab1.js\",\"797\",\"static/chunks/app/blog/%5B...slug%5D/page-0a76953c9f645f94.js\"],\"\"]\n14:I[2529,[\"326\",\"static/chunks/326-4c48d497d1f9fab1.js\",\"797\",\"static/chunks/app/blog/%5B...slug%5D/page-0a76953c9f645f94.js\"],\"\"]\n15:I[5282,[\"326\",\"static/chunks/326-4c48d497d1f9fab1.js\",\"797\",\"static/chunks/app/blog/%5B...slug%5D/page-0a76953c9f645f94.js\"],\"\"]\n"])</script><script>self.__next_f.push([1,"12:[[\"$\",\"script\",null,{\"type\":\"application/ld+json\",\"dangerouslySetInnerHTML\":{\"__html\":\"{\\\"@context\\\":\\\"https://schema.org\\\",\\\"@type\\\":\\\"BlogPosting\\\",\\\"headline\\\":\\\"바닥부터 다시 쌓은 서비스 - MSA 아키텍처 도입기\\\",\\\"datePublished\\\":\\\"2023-12-31T00:00:00.000Z\\\",\\\"dateModified\\\":\\\"2023-12-31T00:00:00.000Z\\\",\\\"description\\\":\\\"기존 아키텍처의 문제점과 이를 개선하기 위한 MSA 아키텍처 구축 방법에 대해 알아보자.\\\",\\\"image\\\":\\\"/static/images/twitter-card.png\\\",\\\"url\\\":\\\"https://gonewbie.github.io/blog/micro-services-steps\\\",\\\"author\\\":[{\\\"@type\\\":\\\"Person\\\",\\\"name\\\":\\\"Hoehyeon Jung\\\"}]}\"}}],[\"$\",\"section\",null,{\"className\":\"mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0\",\"children\":[[\"$\",\"$L13\",null,{}],[\"$\",\"article\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700\",\"children\":[[\"$\",\"header\",null,{\"className\":\"pt-6 xl:pb-6\",\"children\":[\"$\",\"div\",null,{\"className\":\"space-y-1 text-center\",\"children\":[[\"$\",\"dl\",null,{\"className\":\"space-y-10\",\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"dt\",null,{\"className\":\"sr-only\",\"children\":\"Published on\"}],[\"$\",\"dd\",null,{\"className\":\"text-base font-medium leading-6 text-gray-500 dark:text-gray-400\",\"children\":[\"$\",\"time\",null,{\"dateTime\":\"2023-12-31T00:00:00.000Z\",\"children\":\"Sunday, December 31, 2023\"}]}]]}]}],[\"$\",\"div\",null,{\"children\":[\"$\",\"h1\",null,{\"className\":\"text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14\",\"children\":\"바닥부터 다시 쌓은 서비스 - MSA 아키텍처 도입기\"}]}]]}]}],[\"$\",\"div\",null,{\"className\":\"grid-rows-[auto_1fr] divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0\",\"children\":[[\"$\",\"dl\",null,{\"className\":\"pb-10 pt-6 xl:border-b xl:border-gray-200 xl:pt-11 xl:dark:border-gray-700\",\"children\":[[\"$\",\"dt\",null,{\"className\":\"sr-only\",\"children\":\"Authors\"}],[\"$\",\"dd\",null,{\"children\":[\"$\",\"ul\",null,{\"className\":\"flex flex-wrap justify-center gap-4 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8\",\"children\":[[\"$\",\"li\",\"Hoehyeon Jung\",{\"className\":\"flex items-center space-x-2\",\"children\":[[\"$\",\"img\",null,{\"src\":\"/static/images/avatar.jpg\",\"width\":38,\"height\":38,\"alt\":\"avatar\",\"className\":\"h-10 w-10 rounded-full\"}],[\"$\",\"dl\",null,{\"className\":\"whitespace-nowrap text-sm font-medium leading-5\",\"children\":[[\"$\",\"dt\",null,{\"className\":\"sr-only\",\"children\":\"Name\"}],[\"$\",\"dd\",null,{\"className\":\"text-gray-900 dark:text-gray-100\",\"children\":\"Hoehyeon Jung\"}],[\"$\",\"dt\",null,{\"className\":\"sr-only\",\"children\":\"Twitter\"}],[\"$\",\"dd\",null,{\"children\":\"$undefined\"}]]}]]}]]}]}]]}],[\"$\",\"div\",null,{\"className\":\"divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0\",\"children\":[[\"$\",\"div\",null,{\"className\":\"prose max-w-none pb-8 pt-10 dark:prose-invert\",\"children\":[[\"$\",\"h1\",null,{\"id\":\"intro\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#intro\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"Intro\"]}],[\"$\",\"p\",null,{\"children\":\"MSA(Microservice Architecture)는 기존의 모놀리식 아키텍처에서 발생하는 문제점을 해결하기 위해 등장한 아키텍처입니다. 이런 MSA의 도입 배경과 도입 과정에서 발생한 문제점과 이를 해결하기 위한 방법에 대해 알아보겠습니다.\"}],[\"$\",\"h1\",null,{\"id\":\"기존-아키텍처의-문제점\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#기존-아키텍처의-문제점\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"기존 아키텍처의 문제점\"]}],[\"$\",\"div\",null,{\"children\":[\"$\",\"img\",null,{\"alt\":\"Monolithic\",\"src\":\"/static/images/monolithic.png\",\"width\":\"1492\",\"height\":\"1440\"}]}],[\"$\",\"p\",null,{\"children\":\"기존의 모놀리식 아키텍처는 하나의 서비스에 모든 기능이 포함되어 있습니다. 따라서 트래픽이 증가하게 되면 DB 부하가 증가하고 해당 DB를 사용하는 전체 서비스들의 응답 속도가 느려지는 문제점이 있었습니다.\"}],[\"$\",\"h1\",null,{\"id\":\"msa-아키텍처의-도입-배경\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#msa-아키텍처의-도입-배경\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"MSA 아키텍처의 도입 배경\"]}],[\"$\",\"p\",null,{\"children\":\"트래픽이 높을 것으로 예상되는 AA급 게임 서비스와 플랫폼이 연동되어야 했습니다. 이를 해결하기 위해 단순하게 인스턴스나 DB의 사양을 늘리기보다 기존의 모놀리식 아키텍처에서 서비스를 분리하여 서비스 간의 통신을 위한 API를 개발하였습니다.\"}],[\"$\",\"h1\",null,{\"id\":\"msa-아키텍처-구축하기\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#msa-아키텍처-구축하기\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"MSA 아키텍처 구축하기\"]}],[\"$\",\"p\",null,{\"children\":\"이제 실제적으로 MSA 아키텍처를 도입하기 위해 기본 전제를 설정하겠습니다. 기존에도 AWS를 사용하고 있었기 때문에 이를 기반으로 MSA 아키텍처를 구축하겠습니다. 또한 별도의 인프라 구축 인원이 없기 때문에 AWS Managed Service를 사용하게 되었습니다.\"}],[\"$\",\"h2\",null,{\"id\":\"1-aws-lambda-구성-api\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#1-aws-lambda-구성-api\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"1. AWS Lambda 구성 (API)\"]}],[\"$\",\"p\",null,{\"children\":\"기존에 EC2에서 동작하던 API 서버를 AWS Lambda로 변경하였습니다. AWS Lambda는 서버리스 아키텍처로써 서버를 관리할 필요가 없기 때문에 트래픽 증감에 따른 인프라 관리 부담이 없는 팀에서 활용하기 최적이란 결론에 이르러 활용하게 되었습니다. 또한 AWS Lambda 함수들의 배포를 용이하게 하기 위해 Serverless Framework를 사용하였습니다.\"}],[\"$\",\"p\",null,{\"children\":\"Serverless Framework를 통해 모든 AWS Lambda 함수들은 API Gateway를 통해 외부로 노출되게 됩니다. API Gateway는 AWS Lambda 함수들의 엔드포인트를 관리하고 트래픽을 분산시켜주는 역할을 합니다. AWS Lambda에서 직접 엔드포인트를 관리할 수도 있지만, API Gateway를 사용하면 트래픽 제한과 같은 기능을 사용할 수 있기 때문에 API Gateway를 사용하게 되었습니다. Token Bucket 알고리즘을 사용하여 트래픽을 제한하고, 트래픽이 허용량을 초과할 경우 429 Too Many Requests 에러를 반환하게 됩니다.\"}],[\"$\",\"p\",null,{\"children\":\"리전 당 동시성 할당량에 따라 1000~30000 동시성을 가질 수 있고 단일 리전에서 서비스가 구성되어 있었기 때문에 이를 기준으로 계산하려 합니다. 요청 당 실행 함수 횟수를 설명하기 위해 Public API는 다음과 같은 구조로 되어 있습니다.\"}],[\"$\",\"$L14\",null,{\"className\":\"language-js\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-js code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"Public\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"API\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"AWS\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"Lambda\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"-\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u003e\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"Internal\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"API\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"AWS\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"Lambda\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"-\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u003e\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"NoSQL\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"MongoDB\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"Middleware\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"API\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"AWS\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"Lambda\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"-\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u003e\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"[\"}],[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"Internal\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"API\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"AWS\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"Lambda\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"-\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u003e\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"NoSQL\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"MongoDB\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"]\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"-\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u003e\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"External\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"Service\"}]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"Blockchain\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"Game\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"Payment\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" etc\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}]]}]}],[\"$\",\"p\",null,{\"children\":[\"Public API 요청의 응답 시간이 평균적으로 \",[\"$\",\"code\",null,{\"children\":\"250ms\"}],\"라고 가정합시다. 서버가 싱가포르에 위치하고 있었기 때문에 이를 기준으로 계산하였습니다. 이 중에 \",[\"$\",\"code\",null,{\"children\":\"ap-southeast-1(싱가포르)\"}],\" 리전의 경우 AWS의 latency를 측정할 경우 평균 \",[\"$\",\"code\",null,{\"children\":\"90ms\"}],\"정도가 측정되었습니다. 따라서 \",[\"$\",\"code\",null,{\"children\":\"250ms\"}],\"의 응답 시간 중 \",[\"$\",\"code\",null,{\"children\":\"90ms\"}],\"는 latency로써 latency를 제외한 \",[\"$\",\"code\",null,{\"children\":\"160ms\"}],\"를 함수 실행 시간으로 계산하였습니다. 기업 사용자들만 이용 가능한 Middleware API의 경우 외부 서비스를 호출하는 API가 존재하고 해당 서비스가 국내에 있는 경우가 많아 평균적으로 2배인 \",[\"$\",\"code\",null,{\"children\":\"500ms\"}],\"의 응답 시간이 소요되었습니다.\"]}],[\"$\",\"p\",null,{\"children\":[\"참고. \",[\"$\",\"a\",null,{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://cloudping.info/\",\"children\":\"클라우드 서비스 ping 측정 사이트\"}]]}],[\"$\",\"p\",null,{\"children\":[\"또한 Lambda와 연동된 API Gateway의 경우 REST API 설정의 경우 1초당 \",[\"$\",\"code\",null,{\"children\":\"5000\"}],\"개의 요청을 처리할 수 있으며 bust 요청 시 \",[\"$\",\"code\",null,{\"children\":\"10000\"}],\"개의 요청을 처리할 수 있습니다.\"]}],[\"$\",\"p\",null,{\"children\":\"RPS 계산식은 다음과 같습니다.\"}],[\"$\",\"$L14\",null,{\"className\":\"language-js\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-js code-highlight\",\"children\":[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"RPS\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"DAU\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"*\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"Daily\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"Personal\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"Average\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"Request\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"/\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"86400\"}],\"\\n\"]}]}]}],[\"$\",\"p\",null,{\"children\":\"DAU는 일일 사용자 수를 의미하며, Daily Personal Average Request는 일일 사용자 당 평균 요청 횟수를 의미합니다. DAU는 1만명으로 가정하고 Daily Personal Average Request는 20회로 가정하였습니다. 이를 통해 RPS는 다음과 같이 계산됩니다.\"}],[\"$\",\"$L14\",null,{\"className\":\"language-js\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-js code-highlight\",\"children\":[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"RPS\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"10000\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"*\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"20\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"/\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"86400\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"2.3148\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"RPS\"}],\"\\n\"]}]}]}],[\"$\",\"p\",null,{\"children\":\"이는 API Gateway의 기본 제한인 5000 RPS보다 낮기 때문에 API Gateway 요청으로 전부 처리할 수 있게 됩니다.\"}],[\"$\",\"p\",null,{\"children\":[\"참고. \",[\"$\",\"a\",null,{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://docs.aws.amazon.com/ko_kr/apigateway/latest/developerguide/limits.html#apigateway-account-level-limits-table\",\"children\":\"API Gateway 할당량\"}]]}],[\"$\",\"$L14\",null,{\"className\":\"language-js\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-js code-highlight\",\"children\":[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"동시성 \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"초당 요청 횟수\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"*\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"요청 수행 기간\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}]}]}],[\"$\",\"p\",null,{\"children\":\"Lambda의 동시성은 위의 공식을 통해 계산할 수 있습니다. 만일 서비스가 기하급수적으로 확장되서 1초에 100개의 요청을 처리하게 되었다면 다음과 같이 계산할 수 있습니다.\"}],[\"$\",\"$L14\",null,{\"className\":\"language-js\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-js code-highlight\",\"children\":[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"동시성 \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"100\"}],\" requests\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"/\"}],\"second \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"*\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"0.160\"}],\" second \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"16\"}],\" concurrent requests\\n\"]}]}]}],[\"$\",\"p\",null,{\"children\":\"즉 하나의 API(Lambda 함수)가 16개의 요청을 동시성을 소모하게 됩니다. 마이크로서비스로 수행되는 만큼, 수십개의 Lambda가 동시에 호출되는 경우가 발생할 수 있게 됩니다. 기본적으로는 AWS Lambda는 리전 당 1000개의 함수를 동시에 실행할 수 있습니다. 하지만 마이크로서비스인 만큼, SQS나 기타 서비스에도 AWS Lambda가 활용되면서 동시성 할당량이 부족할 수 있게 됩니다. 따라서 이 부분을 AWS Solution Architect 팀과 협의하여 목표 활성 인원에 맞춰 필요한만큼 동시성을 사전에 증가시켰습니다.\"}],[\"$\",\"h2\",null,{\"id\":\"2-aws-cloudformation-구성-cicd\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#2-aws-cloudformation-구성-cicd\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"2. AWS CloudFormation 구성 (CI/CD)\"]}],[\"$\",\"p\",null,{\"children\":\"기존에는 AWS CodeDeploy를 사용하여 배포를 진행하였습니다. 하지만 AWS CodeDeploy는 코드를 배포하기엔 좋았지만 이외의 인프라 구성에 관련된 부분은 직접 설정해야 하는 단점이 있었습니다. 인프라까지 통합적으로 관리하면서 AWS Lambda 함수들의 버전 관리를 위해서 AWS CloudFormation을 활용하게 되었습니다.\"}],[\"$\",\"p\",null,{\"children\":\"Github Actions와의 연동을 통해서 코드 배포와 동시에 빌드가 진행되고 AWS에 배포되는 CI/CD를 구축하였습니다. 배포용 AWS IAM을 생성하고 Github Secrets에 등록하여 Github Actions에서 사용하도록 하였습니다. 또한, 추가적으로 Slack 알림을 위한 Incoming Webhook을 생성하여 Slack에 배포 알림을 받을 수 있도록 하였습니다.\"}],[\"$\",\"h2\",null,{\"id\":\"3-mongodb-atlas-구성-nosql\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#3-mongodb-atlas-구성-nosql\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"3. MongoDB Atlas 구성 (NoSQL)\"]}],[\"$\",\"div\",null,{\"children\":[\"$\",\"img\",null,{\"alt\":\"MongoDB Atlas Infra\",\"src\":\"/static/images/mongodb-atlas-infra.png\",\"width\":\"1546\",\"height\":\"1368\"}]}],[\"$\",\"p\",null,{\"children\":\"MongoDB Atlas는 MongoDB의 클라우드 기반 Managed Service로써 MongoDB를 사용하기 위한 인프라 구축에 관련된 부분을 모두 관리해주기 때문에 MongoDB Atlas를 사용하게 되었습니다. 다만 인프라 구성이 기존의 AWS VPC와 연동되지 않기 때문에 VPC Peering을 통해 연동하였습니다. 여기에 MongoDB Atlas에서는 Change Stream을 Trigger라는 이름으로 제공하고 있습니다. 이러한 Trigger에서는 MongoDB의 데이터 변화를 감지하여 이를 AWS로 보낼 수 있었는데 저희 팀에서는 이 이벤트를 EventBridge로 보내도록 처리했습니다. EventBridge는 AWS의 이벤트 버스로써 이벤트를 받아 이를 Lambda로 전달할 수 있습니다. 이를 통해 MongoDB의 데이터 변화를 실시간으로 감지하여 이를 Lambda로 전달하고 이를 기반으로 데이터들을 갱신할 수 있게 되었습니다.\"}],[\"$\",\"h2\",null,{\"id\":\"4-aws-sqs-구성-message-queue\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#4-aws-sqs-구성-message-queue\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"4. AWS SQS 구성 (Message Queue)\"]}],[\"$\",\"p\",null,{\"children\":\"기존에는 서비스 간 요청을 직접 호출하는 방식으로 진행하였습니다. 하지만 서비스 간의 직접 호출은 서비스 간의 결합도를 높이게 되고, 특정 서비스의 장애가 다른 서비스로 확산될 수 있는 결과를 가지게 됩니다. 또한 Lambda의 경우, 동시성 할당량이 제한되어 있기 때문에 데이터 연동 작업에 있어서 트래픽이 급증할 경우 Lambda의 동시성 할당량을 초과할 경우 해당 데이터들이 소실될 우려가 있었습니다. 이를 해결하기 위해 서비스 간의 통신을 Message Queue를 통해 진행하게 되었습니다. AWS에서 지원하는 Message Queue는 여러 개가 있었지만, 팀의 규모와 해당 기능의 목적성을 생각해서 크게 2가지로 선택지를 압축하였습니다.\"}],[\"$\",\"p\",null,{\"children\":\"우선 AWS MSK는 Kafka를 AWS에서 제공하는 Managed Service로써 Kafka를 사용하기 위한 인프라 구축에 관련된 부분을 모두 관리해줍니다. 다만 MSK의 경우, AWS 인프라와 연결하기 위한 작업을 수동으로 작업해야 되는 단점이 있으며 Kafka를 관리해야 하는 등의 단점이 있었습니다.\"}],[\"$\",\"p\",null,{\"children\":\"두 번째로, AWS SQS는 AWS에서 제공하는 Message Queue로써 이벤트 처리에 대한 인프라 전반에 관련된 부분을 모두 관리해줍니다. 또한, AWS Lambda와의 연동이 용이하고, Lambda의 동시성 할당량을 초과할 경우에도 데이터가 소실되지 않고 SQS에 대기하게 됩니다.\"}],[\"$\",\"h2\",null,{\"id\":\"5-aws-opensearch-구성-search-engine\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#5-aws-opensearch-구성-search-engine\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"5. AWS OpenSearch 구성 (Search Engine)\"]}],[\"$\",\"p\",null,{\"children\":\"기존에는 아이템 검색 기능이 별도로 존재하진 않았습니다. 하지만, 유저가 증가하고 유저들이 원하는 아이템을 손쉽게 찾기 위한 사용자 경험을 제공하기 위해 아이템 검색 기능을 추가하게 되었습니다.\"}],[\"$\",\"p\",null,{\"children\":\"이를 구현하기 위해 기존에는 MongoDB의 인덱스를 사용하여 검색 기능을 구현하고자 하였습니다. 하지만 MongoDB의 인덱스는 텍스트 검색에 최적화되어 있지 않았으며 NoSQL 특성 상 스키마가 존재하지 않는데 인덱스를 작성하게 되면 관리에 어려움이 생길 수 있기 때문에 해당 방법은 제외하였습니다.\"}],[\"$\",\"p\",null,{\"children\":\"차선책으로, AWS OpenSearch Service를 사용하고자 하였습니다. AWS OpenSearch Service는 Elasticsearch를 AWS에서 제공하는 Managed Service로써 Elasticsearch를 사용하기 위한 인프라 구축에 관련된 부분을 모두 관리해줍니다. 또한, Elasticsearch의 경우, 텍스트 검색에 최적화되어 있기 때문에 MongoDB의 인덱스를 사용하는 것에 비해 더 풍부한 기능을 활용할 수 있었습니다.\"}],[\"$\",\"h2\",null,{\"id\":\"6-aws-s3--athena-구성-logging\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#6-aws-s3--athena-구성-logging\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"6. AWS S3 + Athena 구성 (Logging)\"]}],[\"$\",\"div\",null,{\"children\":[\"$\",\"img\",null,{\"alt\":\"S3, Athena Logging\",\"src\":\"/static/images/s3-athena-logging.png\",\"width\":\"1286\",\"height\":\"1234\"}]}],[\"$\",\"p\",null,{\"children\":\"이를 구현하기 위해 기존에는 MongoDB의 로그를 사용하고자 하였습니다. 하지만, MongoDB의 로그는 텍스트 형식으로 저장되어 있기 때문에 로그를 분석하기 위해서는 별도의 로그 분석 툴이 필요하고, 로그를 분석하기 위한 쿼리를 작성해야 하는 등의 단점이 있었습니다.\"}],[\"$\",\"p\",null,{\"children\":\"다른 방법을 모색한 결과, AWS S3와 Athena를 사용하고자 하였습니다. AWS S3는 AWS에서 제공하는 Object Storage로써 로그를 저장하기 위한 파일들을 AWS에서 관리할 수 있습니다. 또한, AWS S3에 저장된 로그를 Athena를 통해 쿼리를 작성하여 로그를 분석할 수 있습니다.\"}],[\"$\",\"p\",null,{\"children\":\"이러한 로깅 시스템을 구축하기 위해 AWS Kinesis를 도입했습니다. AWS Kinesis는 AWS에서 제공하는 Streaming Data Service로써 로그를 수집하기 위한 데이터 파이프라인 인프라에 대한 관리형 서비스를 제공합니다. Kinesis를 통해 축적된 로그 데이터는 Firehose를 통해 S3에 저장되고, 이를 Athena를 통해 쿼리를 작성하여 로그를 분석할 수 있게 됩니다. 또한, Athena 쿼리 분석 속도 향상을 위해 AWS Lambda를 활용하여 파티셔닝을 진행하였습니다.\"}],[\"$\",\"h2\",null,{\"id\":\"7-datadog-구성-monitoring\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#7-datadog-구성-monitoring\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"7. Datadog 구성 (Monitoring)\"]}],[\"$\",\"div\",null,{\"children\":[\"$\",\"img\",null,{\"alt\":\"Datadog Logging\",\"src\":\"/static/images/datadog-monitoring.png\",\"width\":\"1146\",\"height\":\"1354\"}]}],[\"$\",\"p\",null,{\"children\":\"이를 해결하기 위해 기존에는 AWS CloudWatch를 사용하고자 하였습니다. 하지만, CloudWatch가 제공하는 기능들 만으로는 에러 로그를 수집하고, 이를 통해 서비스의 상태를 파악하기에는 한계가 있었습니다. 이에 다른 팀에서 활용 중인 Datadog를 도입하여 서비스 모니터링을 구성하였습니다.\"}],[\"$\",\"p\",null,{\"children\":\"AWS 계정 연결을 통해 인프라에서 사용중인 전반적인 리소스들의 상태를 모니터링할 수 있었고, 서비스에서 발생하는 에러 로그를 수집할 수 있게 되었습니다.\"}],[\"$\",\"h1\",null,{\"id\":\"msa-구성상-발생한-문제점\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#msa-구성상-발생한-문제점\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"MSA 구성상 발생한 문제점\"]}],[\"$\",\"h2\",null,{\"id\":\"1-인프라-구성의-복잡성\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#1-인프라-구성의-복잡성\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"1. 인프라 구성의 복잡성\"]}],[\"$\",\"p\",null,{\"children\":\"기존에는 AWS 상의 인프라가 비교적 간단하기 때문에 수동으로 관리하는 것이 가능했습니다. 하지만 MSA로 변경되면서 인프라가 복잡해지고 이를 관리하기 위해서 AWS CloudFormation과 같은 IaC 도구를 사용하게 되었습니다. 이를 통해 대부분의 AWS 기능들은 CloudFormation을 통해 관리하게 되었지만, MongoDB Atlas와 같은 AWS가 아닌 외부 서비스들은 CloudFormation을 통해 관리할 수 없었습니다.\"}],[\"$\",\"p\",null,{\"children\":\"따라서 MongoDB와 같은 외부 서비스들은 기존에는 수동으로 관리하였습니다. 하지만 stage에 따른 인프라 구성 변경을 수동으로 관리하기에는 개발자들이 휴먼 에러를 일으키기 쉬운 환경이었기에 다른 방법을 찾고자 하였습니다.\"}],[\"$\",\"p\",null,{\"children\":\"MongoDB Atlas에서는 이러한 MongoDB 인프라 구성을 관리하기 위한 CLI 도구로써 Realm CLI를 제공하고 있었습니다. 이러한 Realm CLI를 통해 인프라 관리를 커맨드라인에서 진행할 수 있게 되었습니다. 하지만 이러한 관리 방식의 파편화는 인프라 관리에 있어서 부담을 가지게 되었습니다.\"}],[\"$\",\"p\",null,{\"children\":\"여기에 한번은 Trigger 서비스에서 장애가 발생한 적이 있어서 Change Data가 누락된 적이 있었는데, 인프라가 분리되어 있다보니 이러한 데이터 연동 누락의 확인이 늦어지게 되었습니다. 또한 해당 서비스의 복구까지 시간이 소요되었고 이 기간 동안 데이터 연동이 누락되었기 때문에 수동으로 연동을 수행한 경험이 있었습니다. 인프라가 분리되어 있기 때문에 이러한 관리 포인트의 누락은 향후 서비스에도 큰 문제가 될 수 있는 부분이었습니다.\"}],[\"$\",\"h2\",null,{\"id\":\"2-인프라-구성의-비용\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#2-인프라-구성의-비용\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"2. 인프라 구성의 비용\"]}],[\"$\",\"p\",null,{\"children\":\"MongoDB Atlas에서는 MongoDB 인프라 구성을 위한 관리형 인스턴스를 제공하고 있었습니다. 이러한 인스턴스는 MongoDB Atlas에서 관리하기 때문에 MongoDB를 활용하기 위해서는 MongoDB Atlas의 인스턴스 비용을 추가로 지불해야 했습니다.\"}],[\"$\",\"p\",null,{\"children\":\"마이크로서비스 별로 데이터베이스가 분리되는 만큼 인스턴스 비용이 추가로 발생하게 되었습니다. 게다가 개발 진행 당시에는 Serverless 형식의 서비스가 Preview 형태로 제공되어 있어 비용적으로는 효율적 일지라도 안정성의 이슈가 있었습니다.\"}],[\"$\",\"h2\",null,{\"id\":\"결론-aws-dynamodb-도입\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#결론-aws-dynamodb-도입\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"결론. AWS DynamoDB 도입\"]}],[\"$\",\"div\",null,{\"children\":[\"$\",\"img\",null,{\"alt\":\"DynamoDB\",\"src\":\"/static/images/dynamodb.png\",\"width\":\"1482\",\"height\":\"1220\"}]}],[\"$\",\"p\",null,{\"children\":\"AWS DynamoDB는 MongoDB Atlas와 달리 AWS에서 제공하는 서비스이기 때문에 AWS CloudFormation을 통해 관리할 수 있었습니다. 이를 통해 GSIs(Global Secondary Index)로 관리할 수 있었고, 이를 통해 데이터를 더욱 효율적으로 관리할 수 있었습니다. 다만, CloudFormation을 통해 GSI를 관리할 때 하나의 테이블에서 한번에 하나의 GSI만 수정/삭제가 가능했기 때문에 이부분을 주의하며 개발을 진행했습니다.\"}],[\"$\",\"p\",null,{\"children\":\"또한 기존에는 캐싱 서비스를 구축하지 않아 DB로의 부하가 직접적으로 노출되었으나 DynamoDB에서는 DAX라는 캐싱 서비스를 제공하고 있었습니다. 캐싱을 활용하여 DB로의 부하를 줄일 수 있었고, 이를 통해 트래픽 증가에 따른 인프라 관리 부담을 줄일 수 있었습니다.\"}],[\"$\",\"h1\",null,{\"id\":\"추가-고려-사항\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#추가-고려-사항\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"추가 고려 사항\"]}],[\"$\",\"h2\",null,{\"id\":\"1-aws-lambda의-cold-start\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#1-aws-lambda의-cold-start\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"1. AWS Lambda의 Cold Start\"]}],[\"$\",\"p\",null,{\"children\":\"AWS Lambda는 서버리스 아키텍처로써 서버를 관리할 필요가 없이 서비스를 수행할 수 있습니다. 다만 서버가 없기 때문에 서비스가 최초로 호출될 때 서버를 생성하는 과정이 필요합니다. 이를 Cold Start라고 하는데, 이 과정에서 시간이 소요되기 때문에 이를 최소화하기 위한 방법을 고려해야 합니다.\"}],[\"$\",\"p\",null,{\"children\":\"이를 위해 다양한 방법이 존재하는데, 가장 간단한 방법은 Lambda 함수를 미리 호출하는 것입니다. 일반적으로 Lambda 함수는 최초 호출 시 Cold Start가 발생하고 이후 15분 동안에는 Warm Start가 발생합니다.\"}],[\"$\",\"p\",null,{\"children\":\"이를 활용하여 Lambda 함수를 미리 호출하면 Cold Start가 발생하지 않고 Warm Start가 발생하게 됩니다. 하지만 이를 위해 별도의 서비스를 구축하는 것은 개발자들이 관리적인 측면에서 인프라를 위한 인프라 구축을 하기 때문에 배제하게 되었습니다.\"}],[\"$\",\"p\",null,{\"children\":\"두번째 방법으로, Provisioned Concurrency를 활용하는 방법이 있습니다. 이는 AWS에서 제공하는 방법으로 Lambda 함수를 미리 호출하는 것과 유사한 방식으로 동작합니다. 실제로 인스턴스들을 지정된 갯수만큼 인스턴스를 미리 생성하게 됨으로써 해당 동시성만큼의 Lambda 함수들은 Cold Start가 발생하지 않게 됩니다. 하지만, 이는 인스턴스를 미리 생성하기 때문에 비용적인 측면에서는 비효율적이라는 단점이 있었으며, 해당 동시성 이상의 호출이 발생할 경우 마찬가지로 Cold Start가 발생하기 때문에 현재 리전의 최대 동시성과 동접 인원에 맞춘 동시성 제공을 통한 비용 효율화가 수행되어야 합니다.\"}],[\"$\",\"h2\",null,{\"id\":\"2-rds-구성-relational-database\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#2-rds-구성-relational-database\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"2. RDS 구성 (Relational Database)\"]}],[\"$\",\"p\",null,{\"children\":\"기존에는 주요 서비스들이 서비스 외부에서 동작하기 때문에 NoSQL만 사용하고도 모든 기능을 수행할 수 있었습니다. 하지만 플랫폼에 다양한 기능이 추가되면서 NoSQL만으로는 데이터 정합성 체크가 어렵게 되었습니다.\"}],[\"$\",\"p\",null,{\"children\":\"AWS DynamoDB의 경우 Eventually Consistency를 제공하기 때문에 데이터 정합성 체크가 어려웠습니다. 데이터 갱신이 리전에 전파됨에 있어서 250ms 가량의 딜레이가 있으며 Primary Key나 LSIs(Local Secondary Index)를 통한 데이터 조회의 경우 이를 보장할 수 있지만, GSI의 경우 DynamoDB에서 Strong Consistency를 보장하지 않습니다.\"}],[\"$\",\"blockquote\",null,{\"children\":[\"$\",\"p\",null,{\"children\":\"글로벌 보조 인덱스 또는 DynamoDB 스트림에서의 강력히 일관된 읽기는 지원되지 않습니다.\"}]}],[\"$\",\"p\",null,{\"children\":[\"참고. \",[\"$\",\"a\",null,{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://docs.aws.amazon.com/ko_kr/amazondynamodb/latest/developerguide/HowItWorks.ReadConsistency.html\",\"children\":\"DynamoDB 읽기 정합성\"}]]}],[\"$\",\"p\",null,{\"children\":\"따라서 데이터 정합성 체크를 위해서는 DynamoDB Streams를 활용하여 데이터 변경 이벤트를 통한 갱신 처리를 수행하게 되었습니다. 하지만 이는 데이터 갱신 이벤트를 통해 데이터를 갱신하기 때문에 갱신 속도에 지연이 발생함에 따라 TPS가 낮아지게 됩니다. 또한, 이를 위해 별도의 인프라를 구축해야 하고 동시 데이터 갱신 시 실패 처리 등에 대한 로직을 추가로 작성해야 했습니다.\"}],[\"$\",\"p\",null,{\"children\":\"이러한 복잡성 때문에 데이터 정합성 체크를 위해 RDB를 사용하는 것이 근본적인 해결책임을 알게 되었으나 개발 일정 상 해당 이슈는 TPS를 희생하는 것으로 넘어가게 되었습니다.\"}],[\"$\",\"h1\",null,{\"id\":\"마무리\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#마무리\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"마무리\"]}],[\"$\",\"p\",null,{\"children\":\"기존의 monolithic 구조에서 MSA로 점진적으로 변경하면서 구조 설명과 이를 위한 인프라 구성에 대해 알아보았습니다. 비록 전환 과정이 무조건적인 이득만 있는 부분이 아닌만큼 각 서비스의 특성과 개발 리소스에 따라 적절한 수준의 아키텍쳐를 구성하는 것이 중요한 점을 느낄 수 있었습니다.\"}],[\"$\",\"blockquote\",null,{\"children\":[[\"$\",\"p\",null,{\"children\":\"참고\"}],[\"$\",\"p\",null,{\"children\":[\"$\",\"a\",null,{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://cloudping.info/\",\"children\":\"클라우드 서비스 별 Ping 확인\"}]}],[\"$\",\"p\",null,{\"children\":[\"$\",\"a\",null,{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://docs.aws.amazon.com/ko_kr/apigateway/latest/developerguide/limits.html#apigateway-account-level-limits-table\",\"children\":\"API Gateway 할당량\"}]}],[\"$\",\"p\",null,{\"children\":[\"$\",\"a\",null,{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://docs.aws.amazon.com/ko_kr/amazondynamodb/latest/developerguide/HowItWorks.ReadConsistency.html\",\"children\":\"DynamoDB 읽기 정합성\"}]}]]}]]}],[\"$\",\"div\",null,{\"className\":\"pb-6 pt-6 text-sm text-gray-700 dark:text-gray-300\",\"children\":[[\"$\",\"a\",null,{\"target\":\"_blank\",\"rel\":\"nofollow\",\"href\":\"https://mobile.twitter.com/search?q=https%3A%2F%2Fgonewbie.github.io%2Fblog%2Fmicro-services-steps\",\"children\":\"Discuss on Twitter\"}],\" • \",[\"$\",\"a\",null,{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://github.com/gonewbie/gonewbie.github.io/blob/main/data/blog/micro-services-steps.mdx\",\"children\":\"View on GitHub\"}]]}],[\"$\",\"div\",null,{\"className\":\"pb-6 pt-6 text-center text-gray-700 dark:text-gray-300\",\"id\":\"comment\",\"children\":[\"$\",\"$L15\",null,{\"slug\":\"micro-services-steps\"}]}]]}],[\"$\",\"footer\",null,{\"children\":[[\"$\",\"div\",null,{\"className\":\"divide-gray-200 text-sm font-medium leading-5 dark:divide-gray-700 xl:col-start-1 xl:row-start-2 xl:divide-y\",\"children\":[[\"$\",\"div\",null,{\"className\":\"py-4 xl:py-8\",\"children\":[[\"$\",\"h2\",null,{\"className\":\"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400\",\"children\":\"Tags\"}],[\"$\",\"div\",null,{\"className\":\"flex flex-wrap\",\"children\":[[\"$\",\"$Lb\",null,{\"href\":\"/tags/microservices\",\"className\":\"mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400\",\"children\":\"microservices\"}],[\"$\",\"$Lb\",null,{\"href\":\"/tags/msa\",\"className\":\"mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400\",\"children\":\"msa\"}],[\"$\",\"$Lb\",null,{\"href\":\"/tags/aws\",\"className\":\"mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400\",\"children\":\"aws\"}],[\"$\",\"$Lb\",null,{\"href\":\"/tags/metaverseworld\",\"className\":\"mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400\",\"children\":\"metaverseworld\"}]]}]]}],[\"$\",\"div\",null,{\"className\":\"flex justify-between py-4 xl:block xl:space-y-8 xl:py-8\",\"children\":[[\"$\",\"div\",null,{\"children\":[[\"$\",\"h2\",null,{\"className\":\"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400\",\"children\":\"Previous Article\"}],[\"$\",\"div\",null,{\"className\":\"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400\",\"children\":[\"$\",\"$Lb\",null,{\"href\":\"/blog/http-tcp-and-tls\",\"children\":\"HTTP와 TCP/IP, HTTPS\"}]}]]}],\"$undefined\"]}]]}],[\"$\",\"div\",null,{\"className\":\"pt-4 xl:pt-8\",\"children\":[\"$\",\"$Lb\",null,{\"href\":\"/blog\",\"className\":\"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400\",\"aria-label\":\"Back to the blog\",\"children\":\"← Back to the blog\"}]}]]}]]}]]}]}]]}]]\n"])</script><script>self.__next_f.push([1,"6:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"바닥부터 다시 쌓은 서비스 - MSA 아키텍처 도입기 | Gonewbie's notepad\"}],[\"$\",\"meta\",\"2\",{\"name\":\"description\",\"content\":\"기존 아키텍처의 문제점과 이를 개선하기 위한 MSA 아키텍처 구축 방법에 대해 알아보자.\"}],[\"$\",\"meta\",\"3\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"4\",{\"name\":\"robots\",\"content\":\"index, follow\"}],[\"$\",\"meta\",\"5\",{\"name\":\"googlebot\",\"content\":\"index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1\"}],[\"$\",\"link\",\"6\",{\"rel\":\"canonical\",\"href\":\"https://gonewbie.github.io/blog/micro-services-steps\"}],[\"$\",\"link\",\"7\",{\"rel\":\"alternate\",\"type\":\"application/rss+xml\",\"href\":\"https://gonewbie.github.io/feed.xml\"}],[\"$\",\"meta\",\"8\",{\"property\":\"og:title\",\"content\":\"바닥부터 다시 쌓은 서비스 - MSA 아키텍처 도입기\"}],[\"$\",\"meta\",\"9\",{\"property\":\"og:description\",\"content\":\"기존 아키텍처의 문제점과 이를 개선하기 위한 MSA 아키텍처 구축 방법에 대해 알아보자.\"}],[\"$\",\"meta\",\"10\",{\"property\":\"og:url\",\"content\":\"https://gonewbie.github.io/blog/micro-services-steps\"}],[\"$\",\"meta\",\"11\",{\"property\":\"og:site_name\",\"content\":\"Gonewbie's notepad\"}],[\"$\",\"meta\",\"12\",{\"property\":\"og:locale\",\"content\":\"en_US\"}],[\"$\",\"meta\",\"13\",{\"property\":\"og:image\",\"content\":\"https://gonewbie.github.io/static/images/twitter-card.png\"}],[\"$\",\"meta\",\"14\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"15\",{\"property\":\"article:published_time\",\"content\":\"2023-12-31T00:00:00.000Z\"}],[\"$\",\"meta\",\"16\",{\"property\":\"article:modified_time\",\"content\":\"2023-12-31T00:00:00.000Z\"}],[\"$\",\"meta\",\"17\",{\"property\":\"article:author\",\"content\":\"Hoehyeon Jung\"}],[\"$\",\"meta\",\"18\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"19\",{\"name\":\"twitter:title\",\"content\":\"바닥부터 다시 쌓은 서비스 - MSA 아키텍처 도입기\"}],[\"$\",\"meta\",\"20\",{\"name\":\"twitter:description\",\"content\":\"기존 아키텍처의 문제점과 이를 개선하기 위한 MSA 아키텍처 구축 방법에 대해 알아보자.\"}],[\"$\",\"meta\",\"21\",{\"name\":\"twitter:image\",\"content\":\"https://gonewbie.github.io/static/images/twitter-card.png\"}],[\"$\",\"meta\",\"22\",{\"name\":\"next-size-adjust\"}]]\n"])</script><script>self.__next_f.push([1,"11:null\n"])</script></body></html>